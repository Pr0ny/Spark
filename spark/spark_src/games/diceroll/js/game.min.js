function preload(){game.load.image("bg","games/diceroll/assets/bg.png"),game.load.image("dice1","games/diceroll/assets/dice1.png"),game.load.image("dice2","games/diceroll/assets/dice2.png"),game.load.image("dice3","games/diceroll/assets/dice3.png"),game.load.image("dice4","games/diceroll/assets/dice4.png"),game.load.image("dice5","games/diceroll/assets/dice5.png"),game.load.image("dice6","games/diceroll/assets/dice6.png"),game.load.image("cross","games/diceroll/assets/cross.png"),game.load.image("hide","games/diceroll/assets/hide.png"),game.load.image("win","games/diceroll/assets/win.png"),game.load.image("lose","games/diceroll/assets/lose.png"),game.load.spritesheet("diceRoll","games/diceroll/assets/dice_roll.png",100,120,6)}function createResult(a){for(var b=Math.floor(6*Math.random())%6,c=0;c<2;c++)0!=WIN&&a==whenOK||(b=Math.floor(6*Math.random())%6),diceResult[c]=DICE[b];for(;(0==WIN||a!=whenOK)&&diceResult[0]==diceResult[1];)diceResult[1]=DICE[Math.floor(6*Math.random())%6];return diceResult}function create(){game.add.sprite(0,0,"bg"),container=game.add.sprite(200,90,"diceRoll"),container.animations.add("roll"),whenOK=Math.floor(3*Math.random())%3}function displayResult(a){game.add.sprite(82,223,a[0]),game.add.sprite(178,280,a[1])}function rollDice(){game.input.activePointer.isDown&&chances>0&&game.input.activePointer.x>73&&game.input.activePointer.x<226&&game.input.activePointer.y>541&&game.input.activePointer.y<593&&(game.add.sprite(60,208,"hide"),diceResult=createResult(inc),inc++,container.animations.play("roll",10,!1),chances--,game.add.sprite(32+SHIFT,442,"cross"),SHIFT+=78,setTimeout(function(){displayResult(diceResult)},700),0!=chances&&diceResult[0]!=diceResult[1]||(chances=0,setTimeout(function(){game.add.sprite(0,355,diceResult[0]==diceResult[1]?"win":"lose"),sparkShowResult()},700)))}function update(){game.input.onDown.add(rollDice,this)}var game=new Phaser.Game(300,600,Phaser.AUTO,"",{preload:preload,create:create,update:update}),chances=3,SHIFT=0,WIN=winner,DICE=["dice1","dice2","dice3","dice4","dice5","dice6"],diceResult=[],inc=0;
