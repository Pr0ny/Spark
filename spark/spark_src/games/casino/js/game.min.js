function preload(){game.load.image("bg","games/casino/assets/bg.png"),game.load.image("machine","games/casino/assets/machine.png"),game.load.image("seven","games/casino/assets/seven.png"),game.load.image("clover","games/casino/assets/clover.png"),game.load.image("cherry","games/casino/assets/cherry.png"),game.load.image("casino","games/casino/assets/casino.png"),game.load.image("win","games/casino/assets/win.png"),game.load.image("lose","games/casino/assets/lose.png"),game.load.spritesheet("roll","games/casino/assets/roll.png",SIZE_S,SIZE_S,3),game.load.spritesheet("roll2","games/casino/assets/roll2.png",SIZE_S,SIZE_S,3),game.load.spritesheet("roll3","games/casino/assets/roll3.png",SIZE_S,SIZE_S,3),game.load.spritesheet("lever","games/casino/assets/lever.png",15,85,7)}function create(){if(game.add.sprite(0,0,"bg"),game.add.sprite(9,59,"machine"),game.add.sprite(82,1,"casino"),roll=game.add.sprite(position[0][0],position[0][1],"roll"),roll2=game.add.sprite(position[1][0],position[1][1],"roll2"),roll3=game.add.sprite(position[2][0],position[2][1],"roll3"),lever=game.add.sprite(256,206,"lever"),roll.animations.add("turn"),roll2.animations.add("turn2"),roll3.animations.add("turn3"),lever.animations.add("lower"),win){var a=Math.floor(10*Math.random()%3);for(i=0;i<position.length;i++)result.push(icons[a])}else{var b=-1;for(i=0;i<position.length;i++){for(var a=Math.floor(10*Math.random()%3);b==a;)a=Math.floor(10*Math.random()%3);b=a,result.push(icons[a])}}}function showResult(a,b){a.kill(),game.add.sprite(position[b][0],position[b][1],result[b])}function lowerTheLever(){game.input.activePointer.x>235&&game.input.activePointer.x<235+SIZE_L&&game.input.activePointer.y>237&&game.input.activePointer.y<237+SIZE_L&&(lever.animations.play("lower",10,!1),roll.animations.play("turn",15,!0),roll2.animations.play("turn2",15,!0),roll3.animations.play("turn3",15,!0),setTimeout(function(){showResult(roll,0)},2e3),setTimeout(function(){showResult(roll2,1)},3e3),setTimeout(function(){showResult(roll3,2)},4e3),setTimeout(function(){win?game.add.sprite(6,505,"win"):game.add.sprite(6,505,"lose")},4200),setTimeout(function(){sparkShowResult()},4200))}function update(){game.input.onDown.add(lowerTheLever,this)}var win=winner,position=[[100,250],[142,250],[184,250]],result=[],icons=["seven","clover","cherry"],SIZE_S=35,SIZE_L=20,game=new Phaser.Game(300,600,Phaser.AUTO,"",{preload:preload,create:create,update:update});
